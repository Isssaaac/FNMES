<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全屏图片轮播</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }

            .carousel-container {
                @apply relative overflow-hidden w-full h-screen;
            }

            .carousel-image {
                @apply absolute inset-0 w-full h-full object-cover transition-opacity duration-500;
            }

            .carousel-btn {
                @apply absolute top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center rounded-full bg-black/30 text-white hover:bg-black/50 transition-all duration-300 cursor-pointer z-10;
            }

            .carousel-indicator {
                @apply w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-300 cursor-pointer;
            }

                .carousel-indicator.active {
                    @apply bg-white w-8;
                }
        }
    </style>
</head>
<body class="m-0 p-0 overflow-hidden">
    <!-- 主轮播容器 - 充满整个网页body -->
    <div id="mainCarousel" class="carousel-container">
        <div id="carouselImages" class="w-full h-full"></div>

        <!-- 导航按钮 -->
        <div id="prevBtn" class="carousel-btn left-6">
            <i class="fa fa-chevron-left text-2xl"></i>
        </div>
        <div id="nextBtn" class="carousel-btn right-6">
            <i class="fa fa-chevron-right text-2xl"></i>
        </div>

        <!-- 全屏控制按钮 -->
        <div id="fullscreenToggle" class="carousel-btn top-8 right-8 w-10 h-10 translate-y-0">
            <i class="fa fa-expand text-xl"></i>
        </div>

        <!-- 指示器 -->
        <div id="indicators" class="absolute bottom-8 left-0 right-0 flex justify-center gap-2 z-10"></div>

        <!-- 提示信息 -->
        <div class="absolute top-8 left-8 text-white bg-black/30 px-4 py-2 rounded-md text-sm z-10">
            提示: 点击图片或按钮切换，ESC退出全屏，Ctrl+F切换全屏
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 配置
            const MAX_IMAGES = 20;
            const IMAGE_FOLDER = 'images/';
            const AUTO_PLAY_INTERVAL = 5000;
            let currentIndex = 0;
            let validImages = [];
            let autoPlayTimer = null;

            // DOM元素
            const mainCarousel = document.getElementById('mainCarousel');
            const carouselImages = document.getElementById('carouselImages');
            const indicators = document.getElementById('indicators');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const fullscreenToggle = document.getElementById('fullscreenToggle');

            // 预加载图片并检测有效性
            async function loadImages() {
                validImages = [];

                for (let i = 1; i <= MAX_IMAGES; i++) {
                    try {
                        const response = await fetch(`${IMAGE_FOLDER}Image${i}.jpg`);
                        if (response.ok) {
                            validImages.push(i);
                        }
                    } catch (error) {
                        console.log(`图片 ${IMAGE_FOLDER}Image${i}.jpg 不存在，已跳过`);
                    }
                }

                if (validImages.length === 0) {
                    alert('没有找到任何有效图片，请检查images文件夹是否存在且包含图片');
                    return;
                }

                initCarousel();
                startAutoPlay();
            }

            // 初始化轮播
            function initCarousel() {
                createIndicators();
                createImageElements();
                showImage(currentIndex);

                // 监听全屏状态变化，更新按钮图标
                document.addEventListener('fullscreenchange', updateFullscreenButton);
                document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
                document.addEventListener('mozfullscreenchange', updateFullscreenButton);
                document.addEventListener('msfullscreenchange', updateFullscreenButton);
            }

            // 创建指示器
            function createIndicators() {
                indicators.innerHTML = '';
                validImages.forEach((_, index) => {
                    const indicator = document.createElement('div');
                    indicator.className = `carousel-indicator ${index === currentIndex ? 'active' : ''}`;
                    indicator.addEventListener('click', () => goToImage(index));
                    indicators.appendChild(indicator);
                });
            }

            // 创建图片元素
            function createImageElements() {
                carouselImages.innerHTML = '';
                validImages.forEach((imageNum, index) => {
                    const img = document.createElement('img');
                    img.src = `${IMAGE_FOLDER}Image${imageNum}.jpg`;
                    img.alt = `图片 ${imageNum}`;
                    img.className = `carousel-image ${index === currentIndex ? 'opacity-100' : 'opacity-0'}`;
                    img.dataset.index = index;
                    img.addEventListener('click', nextImage);
                    carouselImages.appendChild(img);
                });
            }

            // 显示指定图片
            function showImage(index) {
                const images = carouselImages.querySelectorAll('img');
                const dots = indicators.querySelectorAll('.carousel-indicator');

                images.forEach((img, i) => {
                    if (i === index) {
                        img.classList.remove('opacity-0');
                        img.classList.add('opacity-100');
                    } else {
                        img.classList.remove('opacity-100');
                        img.classList.add('opacity-0');
                    }
                });

                dots.forEach((dot, i) => {
                    if (i === index) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });

                currentIndex = index;
            }

            // 下一张图片
            function nextImage() {
                resetAutoPlay();
                let nextIndex = currentIndex + 1;
                if (nextIndex >= validImages.length) {
                    nextIndex = 0;
                }
                showImage(nextIndex);
            }

            // 上一张图片
            function prevImage() {
                resetAutoPlay();
                let prevIndex = currentIndex - 1;
                if (prevIndex < 0) {
                    prevIndex = validImages.length - 1;
                }
                showImage(prevIndex);
            }

            // 跳转到指定图片
            function goToImage(index) {
                if (index >= 0 && index < validImages.length) {
                    resetAutoPlay();
                    showImage(index);
                }
            }

            // 自动播放控制
            function startAutoPlay() {
                autoPlayTimer = setInterval(nextImage, AUTO_PLAY_INTERVAL);
            }

            function resetAutoPlay() {
                clearInterval(autoPlayTimer);
                startAutoPlay();
            }

            // 切换浏览器全屏模式
            function toggleBrowserFullscreen() {
                if (document.fullscreenElement ||
                    document.webkitFullscreenElement ||
                    document.msFullscreenElement) {
                    // 退出全屏
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                } else {
                    // 进入全屏
                    const element = document.documentElement;
                    if (element.requestFullscreen) {
                        element.requestFullscreen();
                    } else if (element.webkitRequestFullscreen) {
                        element.webkitRequestFullscreen();
                    } else if (element.msRequestFullscreen) {
                        element.msRequestFullscreen();
                    }
                }
            }

            // 更新全屏按钮图标
            function updateFullscreenButton() {
                const icon = fullscreenToggle.querySelector('i');
                if (document.fullscreenElement ||
                    document.webkitFullscreenElement ||
                    document.msFullscreenElement) {
                    icon.classList.remove('fa-expand');
                    icon.classList.add('fa-compress');
                } else {
                    icon.classList.remove('fa-compress');
                    icon.classList.add('fa-expand');
                }
            }

            // 事件监听
            prevBtn.addEventListener('click', prevImage);
            nextBtn.addEventListener('click', nextImage);
            fullscreenToggle.addEventListener('click', toggleBrowserFullscreen);

            // 键盘控制
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') {
                    nextImage();
                } else if (e.key === 'ArrowLeft') {
                    prevImage();
                } else if (e.key === 'Escape' && (document.fullscreenElement || document.webkitFullscreenElement)) {
                    toggleBrowserFullscreen();
                } else if (e.key === 'f' && e.ctrlKey) {
                    e.preventDefault();
                    toggleBrowserFullscreen();
                }
            });

            // 鼠标悬停暂停自动播放
            mainCarousel.addEventListener('mouseenter', () => clearInterval(autoPlayTimer));
            mainCarousel.addEventListener('mouseleave', startAutoPlay);

            // 启动轮播
            loadImages();
        });
    </script>
</body>
</html>