@using Microsoft.Extensions.Localization
@using FNMES.WebUI;

@inject IStringLocalizer<SharedResource> SharedLocalizer﻿

@{
    Layout = null;
}
<!DOCTYPE html>
<style type="text/css">
    .FNMES-product-box .product-desc li {
        font-size: 20px;
    }
</style>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    @* <title>@ViewBag.SoftwareName</title>
    <meta name="keywords" content="@ViewBag.SoftwareName">
    <meta name="description" content="@ViewBag.SoftwareName"> *@
    <title>@Html.Raw(@SharedLocalizer["Wire MES"])</title>
    <meta name="keywords" content="@Html.Raw(@SharedLocalizer["Wire MES"])">
    <meta name="description" content="@Html.Raw(@SharedLocalizer["Wire MES"])">
    <link rel="shortcut icon" type="image/ico" href="/rp.jpg" />
    <link rel="bookmark" type="image/ico" href="/rp.jpg" />
    <link href="/Content/layui/css/layui.css" rel="stylesheet" />
    <link href="/Content/framework/css/login.css" rel="stylesheet" />
    <link href="/Content/framework/css/animate.css" rel="stylesheet" />
</head>
<body>
    <!-- <div class="FNMES-product-box animated fadeInUp">
        <h2>FNMES查询管理系统</h2>
        <ul class="product-desc">
            <li>FNMES.MVC是一套基于 ASP.NET MVC5 + Layui 开发的通用管理系统快速开发框架。</li>
            <li>系统操作界面简洁，项目结构清晰，功能模块化设计，支撑框架轻量高效。</li>
            <li>目前完成框架搭建和实现基础功能，代码层级分离，注释完整，可快速重构，提高开发效率。</li>
            <li>支持SQL Server、SQL Server CE、MySQL、PostgreSQL和Oracle等多种数据库类型。</li>
            <li>该解决方案适用于OA、电商平台、CRM、物流管理、教务管理等各类管理系统开发。</li>
            <li>兼容除IE8以下所有浏览器，暂不支持移动端，后续会支持以及添加更多功能。</li>
            <li>演示用户名：admin 密码：123456，该演示系统基于云虚拟机，体验效果可能不佳，还请见谅。</li>
        </ul>
        <div class="product-btns">
           @* <a class="layui-btn layui-btn-normal layui-btn-small" target="_blank" href="http://www.cnblogs.com/esofar/p/7093511.html"><i class="layui-icon">&#xe609;</i>&nbsp;框架介绍</a>
            <a class="layui-btn layui-btn-warm layui-btn-small" target="_blank" href="https://github.com/esofar/FNMES.mvc"><i class="layui-icon">&#xe601;</i>&nbsp;贡献代码</a>
            <a class="layui-btn layui-btn-danger layui-btn-small" target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=973095739&site=qq&menu=yes"><i class="layui-icon">&#xe606;</i>&nbsp;联系作者</a>*@
        </div>
    </div>-->
    <div class="FNMES-login-box animated fadeInRight">
        <div class="FNMES-login-header">@Html.Raw(@SharedLocalizer["Wire MES"])</div>
        <div class="FNMES-login-body">
            <form class="layui-form">
                <div class="layui-form-item">
                    <label class="login-icon"><i class="layui-icon">&#xe612;</i></label>
                    <input type="text" name="username" value="admin" lay-verify="required" autocomplete="off" placeholder=@Html.Raw(@SharedLocalizer﻿["Account"]) class="layui-input">
                </div>
                <div class="layui-form-item">
                    <label class="login-icon">
                        <i class="layui-icon">&#xe642;</i>
                    </label>
                    <input type="password" name="password" value="" lay-verify="required" autocomplete="off" placeholder=@Html.Raw(@SharedLocalizer﻿["Password"]) class="layui-input">
                </div>
@*                 <div class="layui-form-item">
                    <div class="login-code-box">
                        <label class="login-icon"><i class="layui-icon">&#xe62d;</i></label>
                        <input type="text" name="verifyCode" lay-verify="required" autocomplete="off" placeholder="验证码" class="layui-input" value="abcd">
                        <img id="verifyCode" src="/account/verifyCode" title="点击更换验证码">
                    </div>
                    <!--<input class="FNMES-pull-right" type="checkbox" lay-skin="primary" name="isSaveAccount" value="true" title="记住账号" />-->
                </div> *@
                <div class="layui-form-item">
                    <button class="layui-btn btn-submit" lay-submit lay-filter="login">@Html.Raw(@SharedLocalizer["LogIn"])</button>
                </div>
                 <div class="layui-form-item">
                    <a style="float: right; text-decoration: underline" href="javascript:showtip()">@Html.Raw(@SharedLocalizer["ForgetThePassword?"])</a>
                </div>
            </form>
        </div>
        <div class="FNMES-login-fooder"></div>
    </div>
</body>
</html>
<!--[if lt IE 9]>
    <script src="/Content/jquery/jquery-1.9.1.min.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
<script src="/Content/jquery/jquery.min.js"></script>
<!--<![endif]-->
<!--[if lt IE 9]>
<script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
<script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<script src="/Content/jquery/jquery.md5.js"></script>
<script src="/Content/framework/js/global.js"></script>
<script src="/Content/layui/layui.js"></script>
<script>
    layui.use(['layer', 'form'], function () {
        //var $ = layui.jquery;
        var layer = layui.layer;
        var form = layui.form;
        form.on('submit(login)', function (data) {
            data.field.password = $.md5(data.field.password);
            $(".btn-submit").html('@Html.Raw(@SharedLocalizer["LoggingIn"])');
            $(".btn-submit").attr('disabled', true).addClass('layui-disabled');
            $.ajax({
                url: "/account/login",
                data: data.field,
                type: "post",
                dataType: "json",
                success: function (result) {
                    if (result.state == 1) {
                        window.location.href = "/home/index";
                        $(".btn-submit").html('@Html.Raw(@SharedLocalizer["LoginSuccessful,Redirected"])');
                    } else {
                        $(".btn-submit").html('@Html.Raw(@SharedLocalizer["LogInNow"])');
                        $(".btn-submit").attr('disabled', false).removeClass('layui-disabled');
                         $("#verifyCode").trigger('click');
                        $.layerMsg(result.message, result.state);
                    }
                },
                error: function (e) {
                    $(".btn-submit").html('@Html.Raw(@SharedLocalizer["LogInNow"])');
                    $(".btn-submit").attr('disabled', false).removeClass('layui-disabled');
                     $("#verifyCode").trigger('click');
                    $.layerMsg('@Html.Raw(@SharedLocalizer["AnExceptionOccurredDuringTheLoginProcess"])');
                }
            });
            return false;
        });
        $("#verifyCode").click(function () {
            $(this).attr("src", "/account/verifyCode?r=" + Math.random());
        });
    });

    function showtip() {
        $.layerMsg('@Html.Raw(@SharedLocalizer["PleaseContactTheAdministratorToResetYourPassword"])', 6);
    }
</script>