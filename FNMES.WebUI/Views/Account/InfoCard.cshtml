@using Microsoft.Extensions.Localization
@using FNMES.WebUI;

@inject IStringLocalizer<SharedResource> SharedLocalizer﻿

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>@Html.Raw(@SharedLocalizer﻿["AccountManagement"])</title>
    <meta name="viewport" content="width=device-width" />
    <link href="~/Content/layui/css/layui.css" rel="stylesheet" />
    <link href="~/Content/framework/css/console.css" rel="stylesheet" />
    <link href="~/Content/framework/css/animate.css" rel="stylesheet" />
    <link href="~/Content/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <!--[if lt IE 9]>
        <script src="/Content/jquery/jquery-1.9.1.min.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
    <script src="~/Content/jquery/jquery.min.js"></script>
    <!--<![endif]-->
    <!--[if lt IE 9]>
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="~/Content/layui/layui.js"></script>
    <script src="~/Content/framework/js/global.js"></script>
    <style type="text/css">
        .avatar-add {
            margin-top: 35px;
            text-align: center;
        }

            .avatar-add p {
                margin-bottom: 20px;
                font-size: inherit;
                text-align: center;
                color: #999;
            }

        .account-header {
            margin-top: 20px;
        }

            .account-header .avatar {
                width: 100px;
                height: 100px;
                border-radius: 50%;
            }

            .account-header .username {
                margin-top: 10px;
                color: #263238;
                font-size: 16px;
            }

        .account-stat-count {
            display: block;
            margin-bottom: 3px;
            font-size: 20px;
            font-weight: 300;
            color: #526069;
        }

        .layui-tab-brief > .layui-tab-more li.layui-this:after, .layui-tab-brief > .layui-tab-title .layui-this:after {
            border-bottom: 3px solid #34A8FF;
        }


        /*----------------------------------------------------------------------*/
        .bind-box .bind-box-item {
            height: 88px;
            overflow: hidden;
            margin: auto;
            border-bottom: 1px solid #d9dde1;
            /*border-top: 1px solid #d9dde1;*/
        }

            .bind-box .bind-box-item .title {
                color: #2b333b;
                font-size: 16px;
                font-weight: 700;
            }

            .bind-box .bind-box-item .status {
                padding-left: 5px;
                color: #f01414;
                font-size: 14px;
            }

            .bind-box .bind-box-item .left {
                width: 60px;
                float: left;
                text-align: center;
                font-size: 36px;
                color: #d9dde1;
                line-height: 87px;
                padding-left: 25px;
            }

            .bind-box .bind-box-item .center {
                float: left;
                font-size: 14px;
                color: inherit;
                line-height: 24px;
                margin-left: 30px;
                margin-top: 20px;
            }

            .bind-box .bind-box-item .right {
                float: right;
                padding-right: 12px;
                margin-top: 28px;
            }
    </style>
</head>
<body>
    <div class="container-fluid animated fadeIn">
        <div class="row">
            <div class="col-md-3">
                <div class="panel container-panel" style="height: 360px;">
                    <div class="panel-heading">
                    </div>
                    <div class="panel-body text-center">
                        <div class="account-header">
                            <img class="avatar" src="/avatar.png" alt="" />
                            <h4 class="username">@@<span id="Name">@SharedLocalizer["Administrator"]</span></h4>
                            <p>@SharedLocalizer["LastLogin"]：<span id="lastVisit" class="last-login"></span></p>
                        </div>
                        @* <div class="account-footer row">
                            <div class="col-md-4">
                                <strong id="loginCount" class="account-stat-count login-number"></strong> <span>登录</span>
                            </div>
                            <div class="col-md-4">
                                <strong class="account-stat-count msg-number">35</strong> <span>消息</span>
                            </div>
                            <div class="col-md-4">
                                <strong class="account-stat-count log-number">0</strong> <span>日志</span>
                            </div>
                        </div> *@
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="panel container-panel">
                    <div class="panel-body">
                        <div class="layui-tab layui-tab-brief">
                            <ul class="layui-tab-title">
                                <li class="layui-this"><i class="fa fa-key" aria-hidden="true"></i>&nbsp;@SharedLocalizer["Account"]</li>
                                @*<li><i class="fa fa-file-text-o" aria-hidden="true"></i>&nbsp;日志</li>*@
                            </ul>
                            <div class="layui-tab-content">
                                <div class="layui-tab-item layui-show">
                                    <div class="bind-box">
                                        <div class="bind-box-item">
                                            <div class="left">
                                                <i class="fa fa-shield" aria-hidden="true"></i>
                                            </div>
                                            <div class="center">
                                                <p>
                                                    <span class="title">@SharedLocalizer["Password"]</span><span class="status">@SharedLocalizer["Set"]</span>
                                                </p>
                                                <p class="font2">@SharedLocalizer["It is used to protect account information and login security"]</p>
                                            </div>
                                            <div class="right">
                                                <button id="btnModifyPwd" class="layui-btn layui-btn-primary">@SharedLocalizer["Modify"]</button>
                                            </div>
                                        </div>
                                        @*<div class="bind-box-item">
                                        <div class="left">
                                        <i class="fa fa-envelope" aria-hidden="true"></i>
                                        </div>
                                        <div class="center">
                                        <p>
                                        <span class="title">邮箱</span><span class="status">未认证</span>
                                        </p>
                                        <p class="font2">可用邮箱加密码登录系统，可用邮箱找回密码</p>
                                        </div>
                                        <div class="right">
                                        <button class="layui-btn layui-btn-primary">立即认证</button>
                                        </div>
                                        </div>
                                        <div class="bind-box-item">
                                        <div class="left">
                                        <i class="fa fa-phone-square" aria-hidden="true"></i>
                                        </div>
                                        <div class="center">
                                        <p>
                                        <span class="title">手机</span><span class="status">188*****202</span>
                                        </p>
                                        <p class="font2">可用手机号加密码登录系统，可通过手机号找回密码</p>
                                        </div>
                                        <div class="right">
                                        <button class="layui-btn layui-btn-primary">更改</button>
                                        </div>
                                        </div>*@
                                    </div>
                                </div>
                                @*<div class="layui-tab-item">
                                <p>开发中，敬请期待...</p>
                                </div>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    layui.use(['element', 'form', 'laydate', 'upload'], function() {
        var form = layui.form;
        var element = layui.element;
        var laydate = layui.laydate;
        var upload = layui.upload;
        laydate.render({
            elem: "#StrBirthday"
        });

        $.ajax({
            url: "/account/getInfoCardForm",
            type: "post",
            dataType: "json",
            async: false,
            success: function(data) {
                $('#Name').text(data.User.Name);
                $("#lastVisit").text(data.UserLogOn.LastVisitTime);
            }
        });

        form.render();

        form.on('submit(saveBasicInfo)', function(data) {
            $.formSubmit({
                url: "/account/infoCard",
                data: data.field
            });
            return false;
        });

        //layui.upload({
        //   url: '/account/uploadAvatar',
        //   method: 'post',
        //   ext: 'jpg|png|gif',
        //   success: function (res) {
        //       if (res.state == 0) {
        //            $.layerMsg(res.message);
        //        } else {
        //             $('#Avatar').val(res.data);
        //            $('.avatar').attr('src', res.data + '?v=' + Math.random());
        //        }
        //     }
        // });

        //执行实例
        //var uploadInst = upload.render({
        //    elem: '#test1', //绑定元素
        //    method: 'post',
         //   ext: 'jpg|png|gif',
         //   url: '/account/uploadAvatar', //上传接口
        //    done: function(res) {
                //上传完毕回调
        //        if (res.state == 0) {
       //             $.layerMsg(res.message);
        //        } else {
        //            $('#Avatar').val(res.data);
         //           $('.avatar').attr('src', res.data + '?v=' + Math.random());
         //       }
           // },
         //   error: function() {
                //请求异常回调
         //   }
       // });

        $('#btnModifyPwd').click(function() {
            $.layerOpen({
                id: "modifyPwd",
                title: '@Html.Raw(@SharedLocalizer["ChangePassword"])',
                width: "450px",
                height: "310px",
                content: "/account/modifyPwd",
                btn: null
            });
        });
    });
</script>

